<!DOCTYPE html>  
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Traffic Knowledge Quiz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="style.css">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

  <!-- Firebase Config -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAJT61cprsH6Zxsv4xvubfMnKlk3XSq3gE",
      authDomain: "traffic-quiz-6eaa3.firebaseapp.com",
      projectId: "traffic-quiz-6eaa3",
      storageBucket: "traffic-quiz-6eaa3.firebasestorage.app",
      messagingSenderId: "1011063341314",
      appId: "1:1011063341314:web:2f4602a1dd1887d3b0821b"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>
</head>

<body>

<!-- ================= SPLASH ================= -->
<div id="introScreen" class="intro-screen">
  <img src="logo.jpeg" class="intro-logo" alt="TGTD Logo">
  <p class="intro-text">Powered by Telangana Transport Department</p>
</div>

<!-- ================= START SCREEN ================= -->
<div id="startScreen" class="screen hidden">
  <img src="logo.jpeg" class="corner-logo">

  <div class="quiz-card">
    <h1>Traffic Knowledge for Students</h1>
    <p>Test your traffic education knowledge</p>
    <p>Start a small quiz of 5 questions</p>

    <input
      type="text"
      id="usernameInput"
      placeholder="Enter your name"
      style="
        width:100%;
        padding:12px;
        margin:15px 0;
        font-size:1rem;
        border-radius:8px;
        border:1px solid #ccc;
      "
    />

    <button class="primary-btn" onclick="startQuiz()">Start Quiz</button>
  </div>
</div>

<!-- ================= QUIZ ================= -->
<div id="quizScreen" class="screen hidden">
  <img src="logo.jpeg" class="corner-logo">

  <div class="question-nav">
    <div class="q-nav-item" onclick="goToQuestion(0)">1</div>
    <div class="q-nav-item" onclick="goToQuestion(1)">2</div>
    <div class="q-nav-item" onclick="goToQuestion(2)">3</div>
    <div class="q-nav-item" onclick="goToQuestion(3)">4</div>
    <div class="q-nav-item" onclick="goToQuestion(4)">5</div>
  </div>

  <div class="quiz-card">
    <div class="progress-container">
      <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="top-bar">
      Question <span id="attempted">1</span> / 5
    </div>

    <h2 id="question"></h2>
    <img id="qImage" class="q-image hidden">

    <div id="options">
      <button class="option-btn" data-option="1" onclick="selectOption(1,this)">
        A. <span id="o1"></span>
      </button>
      <button class="option-btn" data-option="2" onclick="selectOption(2,this)">
        B. <span id="o2"></span>
      </button>
      <button class="option-btn" data-option="3" onclick="selectOption(3,this)">
        C. <span id="o3"></span>
      </button>
      <button class="option-btn" data-option="0" onclick="selectOption(0,this)">
        D. None of the above
      </button>
    </div>

    <div style="display:flex;justify-content:space-between;margin-top:20px">
      <button class="secondary-btn" onclick="goBack()">Back</button>
      <button class="primary-btn" onclick="nextQuestion()">Next</button>
    </div>
  </div>
</div>

<!-- ================= RESULT ================= -->
<div id="resultScreen" class="screen hidden">
  <div class="quiz-card">

    <div class="score-ring-wrapper">
      <svg class="score-ring" width="180" height="180">
        <circle class="ring-bg" cx="90" cy="90" r="80"></circle>
        <circle class="ring-progress" cx="90" cy="90" r="80"></circle>
      </svg>
      <div class="score-ring-text">
        <span id="ringScore">0</span>
        <small>/ 100</small>
      </div>
    </div>

    <h3 id="finalScore"></h3>
    <div id="reviewSection"></div>

    <button class="primary-btn" onclick="location.reload()">Restart</button>
  </div>
</div>

<!-- âœ… ONLY CHANGE HERE -->
<script src="script.js" defer></script>

<!-- SPLASH AUTO HIDE -->
<script>
  setTimeout(() => {
    document.getElementById("introScreen").style.display = "none";
    document.getElementById("startScreen").classList.remove("hidden");
  }, 2000);
</script>

</body>
</html>